
Kiss Linux Installation Guide
________________________________________________________________________________

This guide details how to install KISS by utilizing the live CD/USB of another
Linux distribution. Your choice should contain partition and filesystem tools
as well as tar and xz.

+------------------------------------------------------------------------------+
|                                                                              |
| Achtung!                                                                     |
|                                                                              |
| To begin, boot the chosen live environment, login as root, connect to the    |
| internet and setup your disk, partitions and filesystems. The disks should   |
| then be mounted to /mnt. Also have a fstab file ready.                       |
|                                                                              |
| Later on this guide, you will configure the Linux kernel. Research your      |
| hardware and make note of needed features, drivers or firmware.              |
|                                                                              |
+------------------------------------------------------------------------------+


[000] Index
________________________________________________________________________________

[001] Install KISS
________________________________________________________________________________

This step involves downloading a tarball and extracing it to /mnt. Bein by
declaring three variables.

+------------------------------------------------------------------------------+
|                                                                              |
|  $ ver=24.12.18                                                              |
|  $ url=https://codeberg.org/kiss-community/repo/releases/download/$ver       |
|  $ file=kiss-chroot-$ver.tar.xz                                              |
|                                                                              |
+------------------------------------------------------------------------------+

--[002] Download and Install Tarball -------------------------------------------

  This tarball contains the base system minus the bootloader and kernel. Just
  enough for the system to rebuild itself and in addition, build any other
  required packages.

  The following packages are included: b3sum baselayout binutils bison busybox
  bzip2 certs curl flex gcc git gmp kiss libmpc linux-headers m4 make mpfr musl
  openssl pigz xz zlib

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ curl -fLO "$url/$file"                                                  |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[003] Verify Checksums (Recommended) -----------------------------------------

  This step verifies that the file downloaded matches the file hosted remotely.
  If this step fails, try downloading the file again. If the issue persists,
  get in touch @/contact

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ sha256sum $file                                                         |
  |  4e5ecef56e747029d2665a038b17a156a0cffd8ba9c99a776226aaf02bd9ff72          |
  |  $ b3sum $file                                                             |
  |  6c0a95539f3328baa8019e744869273838ab8303e7de2b74d04ec3734e930fd4          |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[004] Unpack the Tarball -----------------------------------------------------

  This step installs the base system.

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ cd /mnt                                                                 |
  |  $ tar xvf "$OLDPWD/$file"                                                 |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[005] Enter the Chroot -------------------------------------------------------

  This is a simple script to change root to /mnt and setup the environment.
  The script handles mounting pseudo filesystems (/proc, /dev, /sys, etc),
  enabling network inside the chroot and cleaning everything up upon exit.

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ /mnt/bin/kiss-chroot /mnt                                               |
  |                                                                            |
  +----------------------------------------------------------------------------+

  Welcome to KISS Linux.


[006] Setup Official Repositories
________________________________________________________________________________

The base system contains no repositories. To continue the installation, the
official repositories must be enabled.

The official repositories are designed to be small and understandable. Instead
of attempting to package the world they act as an extensible base which users
can build upon to suit their needs. They provide everything up to and including
a modern web browser and a media player. For a list of all packages use #/#300

Read the #/wiki/KISS_PATH page before continuing with the guide.

--[007] Obtain the Official Repositories ---------------------------------------

  Clone the repositories to the directory of your choosing. It is entirely up
  to you where they reside though the distribution recommends it be somewhere
  writable by your user.

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ git clone https://codeberg.org/kiss-community/repo                      |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[008] Set KISS_PATH ----------------------------------------------------------

  Contained inside 'repo' are four KISS repositories (core, extra and wayland).
  The absolute paths to these four repositories are the values given to
  KISS_PATH. Set your KISS_PATH and enable 'core' and 'extra'. If a graphical
  environment is required, enable 'wayland'.

  Refer to the #/wiki/KISS_PATH page for more information.

--[010] Enable Signatures Veritication -----------------------------------------

  Repository signing ensures that all updates have been signed by authorized
  developers and further prevents unsigned updates from reaching your system. In
  KISS this uses a feature built into git (merge.verifySignatures).

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ git config gpg.ssh.allowedSignersFile .allowed_signers                  |
  |  $ git config merge.verifySignatures true                                  |
  |                                                                            |
  +----------------------------------------------------------------------------+


[011] Rebuild the System
________________________________________________________________________________

  The system must now be rebuilt to update its software, apply optimizations and
  install documentation.

  If a package fails to build, open an issue at $/kiss-community/repo

--[012] Modify Compiler Flags (Optional) ---------------------------------------

  * To play it safe use -O2 or -Os instead of -O3.

  * If memory is low, omit -pipe. This option speeds up compilation but may use
    more memory.

  * If the intention is to transfer packages between machines, omit
    -march=native. This option tells the compiler to use optimizations unique to
    the processor's architecture.

  * The -jX option should match the number of CPU threads available. This can
    be omitted, however builds will then be limited to a single thread.

  +----------------------------------------------------------------------------+
  |                                                                            |
  | CFLAGS/CXXFLAGS                                                            |
  |                                                                            |
  |  # NOTE: The 'O' in '-O3' is the letter O and NOT 0 (ZERO).                |
  |  $ export CFLAGS="-O3 -pipe -march=native"                                 |
  |  $ export CXXFLAGS="$CFLAGS"                                               |
  |                                                                            |
  | MAKEFLAGS                                                                  |
  |                                                                            |
  |  # NOTE: '4' should be changed to match the number of threads.             |
  |  #       This value can be found by running 'nproc'.                       |
  |  $ export MAKEFLAGS="-j4"                                                  |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[013] Update all Base Packages to the Latest Version -------------------------

  This is how updates are perfomed. This command uses git to pull down changes
  from all enabled repositories and will then optionally handle the upgrade
  process.

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ kiss update                                                             |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[014] Rebuild all Packages ---------------------------------------------------

  Simply 'cd' to the installed packages database and use a glob to grab the name
  of every installed package. This glob is then passed to the package manager as
  a list of packages to build.

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ cd /var/db/kiss/installed && kiss build *                               |
  |                                                                            |
  +----------------------------------------------------------------------------+


[015] The Kernel
________________________________________________________________________________

This step involves configuring and building your own Linux kernel. The Linux
kernel is not managed by the distribution and is instead the user's sole
responsability.

--[016] Download the Kernel Sources --------------------------------------------

  Download the kernel sources of your choosing. Official kernel releases can
  be found at kernel.org and kiss-libre can be found at linux-libre.fsfla.org.
  There are many other kernels, see https://wiki.archlinux.org/title/kernel

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ curl -fLO KERNEL_SOURCE                                                 |
  |  $ tar xvf KERNEL_SOURCE                                                   |
  |  $ cd linux-*                                                              |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[017] Download Firmware Blobs (If Required) ----------------------------------

  If your hardware requires the use of firmware, download the latest tarball
  snapshot from the linux below and copy the required firmware (including
  hierarchy) to /usr/lib/firmware.

  https://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git

  +----------------------------------------------------------------------------+
  |                                                                            |
  | Download and extract the firmware.                                         |
  |                                                                            |
  |  $ curl -fLO FIRMWARE_SOURCE.tar.gz                                        |
  |  $ tar xvf FIRMWARE_SOURCE.tar.gz                                          |
  |                                                                            |
  | Copy the required firmware to '/usr/lib/firmware'.                         |
  |                                                                            |
  |  $ mkdir -p /usr/lib/firmware                                              |
  |  $ cp -R ./path/to/driver /usr/lib/firmware                                |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[018] Configure the Kernel ---------------------------------------------------

  Keep in mind that the distribution does not provide an initramfs nor does this
  guide insclude how to use one. Thore requiring an initramfs should look into
  $/illiliti/tinyramfs

  Thus (without an initramfs), your kernel must be able to locate and mount the
  root filesystem without the use of modules. In other words, these drivers
  should be "baked in" (=y) (not =m).

  +----------------------------------------------------------------------------+
  |                                                                            |
  | Generate a default config with most drivers built into the kernel.         |
  |                                                                            |
  |  $ make defconfig                                                          |
  |                                                                            |
  | Open an interative menu to edit the generated .config.                     |
  |                                                                            |
  |  $ kiss b ncurses                                                          |
  |  $ make HOSTLDLIBS=-ltinfo menuconfig                                      |
  |                                                                            |
  | Store the generated configuration for later use.                           |
  |                                                                            |
  |  $ cp .config /path/to/somewhere                                           |
  |                                                                            |
  +----------------------------------------------------------------------------+

  Ensure that CONFIG_IKHEADERS is set to =n as it being enabled will result in
  build failures due to busybox incompatibility. It is also recommended that
  CONFIG_IKCONFIG and CONFIG_IKCONFIG_PROC be set to =y. This causes the kernel
  to store its config and make it accessible at runtime via /proc/config.gz

[019] Install Required Packages ----------------------------------------------

  Depending on how your kernel is configured, some additional software may be
  required. Your options are to either install the dependencies or figure out
  and disable the options pulling them in.

----[020] Perl -----------------------------------------------------------------

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ kiss b perl                                                             |
  |                                                                            |
  | Perl can otherwise be avoided by applying this patch (by $/E5ten).         |
  |                                                                            |
  |  $ patch -p1 < /usr/share/doc/kiss/wiki/kernel/no-perl.patch               |
  |                                                                            |
  +----------------------------------------------------------------------------+

----[021] libelf ---------------------------------------------------------------

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ kiss b libelf                                                           |
  |                                                                            |
  | The following fix may also need to be applied.                             |
  |                                                                            |
  |  $ sed '/<stdlib.h>/a #include <linux/stddef.h>' \                         |
  |        tools/objtool/arch/x86/decode.c > _                                 |
  |  $ mv -f _ tools/objtool/arch/x86/decode.c                                 |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[022] Build the Kernel -------------------------------------------------------

  This may take a while to complete. The compilation time depends on your
  hardware and kernel configuration. The smaller the .config the less time will
  be needed to build the kernel.

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ make -j4                                                                |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[023] Install the Kernel -----------------------------------------------------

----[024] Install Kernel Modules -----------------------------------------------

  If the kernel is configured without module support this step can be skipped.
  Modules are installed to /usr/lib/modules.

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ make INSTALL_MOD_STRIP=1 modules_install                                |
  |                                                                            |
  +----------------------------------------------------------------------------+

----[025] Install Kernel Image -------------------------------------------------

  The kernel is installed to /boot. A LILO error may appear, this is normal.

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ make install                                                            |
  |                                                                            |
  +----------------------------------------------------------------------------+

  Rename the kernel/System.map (vmlinuz to vmlinuz-VERSION).

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ mv /boot/vmlinuz    /boot/vmlinuz-VERSION                               |
  |  $ mv /boot/System.map /boot/System.map-VERSION                            |
  |                                                                            |
  +----------------------------------------------------------------------------+


[026] Install Required Packages
________________________________________________________________________________

The software below is required unless stated otherwise. Also, all package
manager actions have a single letter alias (build == b), these aliases will
be used from here on. Information about packages can be found here @/wiki

--[027] Install Init Scripts ---------------------------------------------------

  The default init is busybox init (though nothing ties you to it). The below
  command installs the portable initialization framework usable by all inits.

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ kiss b baseinit                                                         |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[028] The Bootloader ---------------------------------------------------------

  The distribution currently provides two boot methods. Grub or EFISTUB. If
  using BIOS, choose grub. If using EFI, choose grub or EFISTUB.

  * Grub    @/wiki/pkg/grub
  * EFISTUB @/wiki/pkg/efibootmgr

--[029] Filesystem Utilities ---------------------------------------------------

  NOTE: Open an issue at $/kiss-community/repo for additional filesystem
  support.

  * EXT(234) @/wiki/pkg/e2fsprogs
  * (V)FAT   @/wiki/pkg/dosfstools

--[030] WiFi (Optional) --------------------------------------------------------

  * @/wiki/pkg/wpa_supplicant
  * @/wiki/pkg/eiwd

--[031] Dynamic IP Addressing (Optional) ---------------------------------------

  * @/wiki/pkg/dhcpcd


[032] Post Installtion
________________________________________________________________________________

The installation is complete and the system should now be capable of booting
itself. If the system fails to boot, check your kernel configuration and ensure
that the kernel can locate and mount the root filesystem.

Users are encouraged to package things for themselves. If the default software
offerings (listed below) are of no interest, package things that are.

--[033] Change the Root Password -----------------------------------------------

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ passwd                                                                  |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[034] Add a Normal User ------------------------------------------------------

  +----------------------------------------------------------------------------+
  |                                                                            |
  |  $ adduser USERNAME                                                        |
  |                                                                            |
  +----------------------------------------------------------------------------+

--[035] Install Graphical Session (Wayland) (Optional) -------------------------

  Refer to the documentation for each package.

    * Wayland Compositor   @/wiki/pkg/sway
    * Terminal Emulator    @/wiki/pkg/foot
    * Web Browser          @/wiki/pkg/firefox
    * Media Player         @/wiki/pkg/mpv
    * Desktop Background   @/wiki/pkg/wbg
    * Color Temperature    @/wiki/pkg/wlsunset
    * Clipboard Management @/wiki/pkg/wayclip
    * Screenshots          @/wiki/pkg/grim
    * Region Selection     @/wiki/pkg/slurp


[036] Further Reading
________________________________________________________________________________

Refer to the Wiki for more information. @/wiki

* @/wiki/package-manager
* @/wiki/package-system
* @/wiki/device-management
* @/wiki/service-management
* @/wiki/hostname

If you have any questions, get in touch @/contact


________________________________________________________________________________


Eli Soli (C) 2025

The registered trademark Linux(R) is used pursuant to a sublicense from the
Linux Foundation, the exclusive licensee of Linus Torvalds, owner of the mark
on a worldwide basis.
